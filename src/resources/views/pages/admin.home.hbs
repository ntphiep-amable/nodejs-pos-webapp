<link rel="stylesheet" href="./styles/form.css">
<style>
  .avt-img {
    max-width: 60px;
  }
</style>

<section id='body-section' class='head-bold'>
  <div class='container py-5'>
    <div class="row justify-content-center">
      <div class="col-10 col-xl-4">
        <p>
          <span class="mb-0 fs-1">Welcome administator!</span>
          <h2 class="teriary-color" id="name">{{name}}</h2 class="teriary-color">
        </p>
        <h2 class="text-center mt-5">
            Add new <span class="pri-color">employee</span>
        </h2>
        <p class="text-center text-sm">
          Fill in the form below to add new employee
        </p>
          <form class='addEmployee my-2'>
            <div class="form-group">
              <label for='fullname'>Full name</label>
              <input type='text' id='fullname' name='fullname' class="form-control" required placeholder="Employee's full name" />
            </div>
            <div class="form-group">
              <label for='email'>Email</label><br />
              <input type='email' id='email' name='email' class="form-control" required placeholder="Employee's email" />
            </div>
            <button type='submit' class="btn mt-1 btn-pri-f">
              Add employee
            </button>
          </form>
          <div class="alert alert-danger alert-dismissible fade show" role="alert" style="display: none;">
            <strong class="message">Invalid username or password!</strong> Please try again.
            <span ></span>
            <button type="button" class="close" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
      </div>
      {{!-- end of col-5 --}}
      <div class="col-12 col-lg-8 mt-xl-0 mt-5">
        <div class="table-responsive">
          <h2 class="text-center">
            List of <span class="pri-color">employees</span>
          </h2>
          <p class="text-center text-sm">
            Click on the employee's name to view sales report, <br>
            or click on the number to view account information
          </p>
          <div class="form-group search-spec">
            <label for="search"><i class="bi bi-search"></i></label>
            <input type="text" id="search" class="form-control" placeholder="Search by name or email" >
          </div>
          <table class="table table-striped table-hover mt-2 w-100">
            <thead>
              <th scope="col">#</th>
              <th scope="col">
                Avatar
              </th>
              <th scope="col">
                Full name
              </th>
              <th scope="col">Email</th>
              <th scope="col">
                Active?
              </th>
              <th scope="col">
                Action?
              </th>
            </thead>
            <tbody>
              {{#each employeeList}}
                <tr>
                  <th scope="row">
                    <a href="/admin/account/{{email}}">{{add @index 1}}</a>
                  </th>
                  <td>
                    <div class="d-flex justify-content-center align-items-center">
                      {{#if (equals avtImage "")}}
                        <img src="/images/avatar/empty.png" alt="" class="avt-img">
                      {{else}}
                        <img src="{{avtImage}}" alt="" class="avt-img">
                      {{/if}}
                    </div>
                    </td>
                  <td><a href='/admin/stat/{{email}}'>{{fullname}}</a></td>
                  <td class="text-dot">{{email}}</td>
                  <td class="text-center">
                    {{#if isActive}}
                      <span class="badge badge-success">Active</span>
                    {{else}}
                      <span class="badge badge-danger">Inactive</span>
                    {{/if}}
                  </td>
                  <td class="text-center" data-email="{{email}}">
                    <div class="d-flex justify-content-between">
                        <button class="hidden-btn lock-btn" title="Lock/Unlock this employee" data-status="{{#if isLocked}}lock{{else}}unlock{{/if}}">
                          {{#if isLocked}}
                            <span class="badge badge-danger"><i class="bi bi-lock-fill"></i></span>
                            <span class="badge badge-success d-none"><i class="bi bi-unlock-fill"></i></span>
                          {{else}}
                            <span class="badge badge-success"><i class="bi bi-unlock-fill"></i></span>
                            <span class="badge badge-danger d-none"><i class="bi bi-lock-fill"></i></span>
                          {{/if}}
                        </button>
                        <button class="hidden-btn send-link-btn" title="Send link to this employee">
                            <span class="badge badge-info"><i class="bi bi-envelope-fill"></i></span>
                        </button>
                    </div>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>

<script src='/js/adminPage.js'></script>